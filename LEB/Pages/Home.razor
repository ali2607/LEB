@page "/"

<PageTitle>Home</PageTitle>

<!-- Notes Display -->
<div class="container mt-5 pt-5 main-content">
    <div class="row g-3 justify-content-center">
        @foreach (var note in _notes)
        {
            var index = _notes.IndexOf(note);
            <div class="col-md-6 col-lg-4 col-xl-3">
                <div class="card note-card h-100">
                    <div class="card-body" style="cursor: pointer;"
                         data-bs-toggle="modal"
                         data-bs-target="#myModal">
                        @((MarkupString)(note.Content.Length > 200 ? note.Content.Substring(0, 200) + "..." : note.Content))
                    </div>
                    <div class="card-footer d-flex justify-content-between align-items-center" style="background-color: inherit; border-top: none;">
                        <div class="text-muted small">
                            Created: @note.CreatedDate.ToString("g")<br />
                            Updated: @note.UpdatedDate?.ToString("g")
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@code {

    #region Fields

    private List<Note> _notes = new();

    #endregion Fields

    #region Classes
    /// <summary>
    /// Represents a note with its content, summary, and timestamps.
    /// </summary>
    private class Note
    {
        /// <summary>
        /// Gets or sets the unique identifier of the note.
        /// </summary>
        public int Id { get; set; }

        /// <summary>
        /// Gets or sets the HTML content of the note.
        /// </summary>
        public string Content { get; set; } = string.Empty;

        /// <summary>
        /// Gets or sets the summary of the note generated by the LLM.
        /// </summary>
        public string? Summary { get; set; }

        /// <summary>
        /// Gets or sets the timestamp when the note was summarized.
        /// </summary>
        public DateTime? SummaryDate { get; set; }

        /// <summary>
        /// Gets or sets the timestamp when the note was created.
        /// </summary>
        public DateTime CreatedDate { get; set; }

        /// <summary>
        /// Gets or sets the timestamp when the note was last updated.
        /// </summary>
        public DateTime? UpdatedDate { get; set; }
    }
    #endregion Classes

}